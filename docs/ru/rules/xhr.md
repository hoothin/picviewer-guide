---
title: xhr：XHR запросы
---

# xhr: Запрос внутренней страницы

Когда оригинал существует только на внутренней странице, используйте `xhr` для получения внутренней страницы и разбора изображения.

## Пример структуры

```js
xhr: {
  url: '.showcase__link',
  query: 'img[fetchpriority]'
}
```

## Описание полей

| Поле | Описание |
| --- | --- |
| `url` | Ссылка на внутреннюю страницу (селектор, регулярное выражение или функция) |
| `query` | Селектор изображения на внутренней странице или функция |
| `caption` | Необязательно, текст описания |
| `headers` | Необязательно, заголовки запроса |
| `cacheNum` | Необязательно, количество кэшируемых элементов |

## Продвинутый: Форма функции

```js
xhr: {
  url: function (a) {
    if (!a) return
    return a.href
  },
  query: function (html, doc) {
    let img = doc.querySelector('#img')
    return img && img.src
  }
}
```

## Возвращаемое значение

- Строка: Одно изображение.
- Массив: Несколько изображений.
- Объект: `{ url: [], cap: '' }`.

## Примечания

- Запросы внутренних страниц потребляют сетевые ресурсы, используйте только при необходимости.
- Можно комбинировать с `cacheNum` для уменьшения повторяющихся запросов.